!function(e,t){"undefined"!=typeof module&&module.exports?"undefined"==typeof angular?module.exports=t(require("angular")):module.exports=t(angular):"function"==typeof define&&define.amd?define(["../../example/client/bower_components/angular/angular"],t):t(e.angular)}(this,function(e){"use strict";e.module("serverTable",[]).run(["$templateCache",function(e){e.put("template/servertable/pagination.html",'<div id="server-table-paginator" class="server-table-paginator" ng-if="vm.numberOfPages > 1"><button class="btn btn-default"  type="button" ng-disabled="vm.currentPage === 0" ng-click="previousPage()"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></button><b>{{vm.currentPage+1}}/{{vm.numberOfPages}}</b><button class="btn btn-default" type="button" ng-disabled="vm.currentPage === vm.numberOfPages-1" ng-click="nextPage()"><span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></button></div>'),e.put("template/servertable/itemsByPage.html",'<div class="form-group"><label for="itemsByPage">{{"ITEMS_BY_PAGE" | translate}}:</label><select class="form-control" id="itemsByPage" ng-model="vm.actualItemsByPage" ng-options="rows.value as rows.value for rows in vm.itemsByPage"></select></div>'),e.put("template/servertable/yearFilter.html",'<div class="form-group"><label for="year">{{"YEAR_FILTER" | translate}}:</label><select class="form-control" id="year" ng-model="vm.year" ng-options="year.id as year.value for year in vm.years"></select></div>'),e.put("template/servertable/monthFilter.html",'<div class="form-group"><label for="month">{{"MONTH_FILTER" | translate}}:</label><select class="form-control" id="month" ng-model="vm.month" ng-options="month.id as month.value | translate for month in vm.months"></select></div>'),e.put("template/servertable/search.html",'<div class="form-group"><label for="search">{{"SEARCH" | translate}}:</label><input class="form-control" id="search" ng-model="vm.searchText"/></div>')}]),e.module("serverTable").constant("sTableConfig",{itemsByPage:[{value:2},{value:5},{value:10},{value:20},{value:30},{value:40}],months:[{id:1,value:"JANUARY"},{id:2,value:"FEBRUARY"},{id:3,value:"MARCH"},{id:4,value:"APRIL"},{id:5,value:"MAY"},{id:6,value:"JUNE"},{id:7,value:"JULY"},{id:8,value:"AUGUST"},{id:9,value:"SEPTEMBER"},{id:10,value:"OCTOBER"},{id:11,value:"NOVEMBER"},{id:12,value:"DECEMBER"}],countUrl:"/count",listUrl:"/list",sortAscIcon:"glyphicon glyphicon-triangle-top",sortDescIcon:"glyphicon glyphicon-triangle-bottom",sortNoneIcon:"",paginatorTemplateUrl:"template/servertable/pagination.html",itemsByPageTemplateUrl:"template/servertable/itemsByPage.html",yearFilterTemplateUrl:"template/servertable/yearFilter.html",monthFilterTemplateUrl:"template/servertable/monthFilter.html",searchFieldTemplateUrl:"template/servertable/search.html"}),e.module("serverTable").provider("sTable",["sTableConfig",function(e){var t=this;Object.defineProperties(t,{sortAscIcon:{get:function(){return e.sortAscIcon},set:function(t){e.sortAscIcon=t}},sortDescIcon:{get:function(){return e.sortDescIcon},set:function(t){e.sortDescIcon=t}},sortNoneIcon:{get:function(){return e.sortNoneIcon},set:function(t){e.sortNoneIcon=t}},paginatorTemplateUrl:{get:function(){return e.paginatorTemplateUrl},set:function(t){e.paginatorTemplateUrl=t}},itemsByPageTemplateUrl:{get:function(){return e.itemsByPageTemplateUrl},set:function(t){e.itemsByPageTemplateUrl=t}},yearFilterTemplateUrl:{get:function(){return e.yearFilterTemplateUrl},set:function(t){e.yearFilterTemplateUrl=t}},monthFilterTemplateUrl:{get:function(){return e.monthFilterTemplateUrl},set:function(t){e.monthFilterTemplateUrl=t}},searchFieldTemplateUrl:{get:function(){return e.searchFieldTemplateUrl},set:function(t){e.searchFieldTemplateUrl=t}}}),t.$get=[,function(){return t}]}]),e.module("serverTable").factory("sTableService",["$http","$q","$log",function(e,t,r){function n(n,a){return e.get(n,{params:a}).then(function(e){return e.data})["catch"](function(e){return r.error(e),t.reject(e)})}return{getDataFromServer:n}}]),e.module("serverTable").controller("STableController",["$scope","$http","sTableConfig","sTableService",function(e,t,r,n){function a(t){t&&(o.currentPage=0);var r={itemsByPage:o.actualItemsByPage,currentPage:o.currentPage,month:o.month,year:o.year,searchText:o.searchText,sort:o.sort};return n.getDataFromServer(e.listUrl,r).then(function(e){o.tableData=e})}function l(){var t={month:o.month,year:o.year,searchText:o.searchText};return n.getDataFromServer(e.countUrl,t).then(function(e){var t=e.numberOfRows;o.numberOfPages=Math.ceil(t/(o.actualItemsByPage||t))})}var o=this;o.itemsByPage=r.itemsByPage,o.months=r.months,o.getListFromServer=a,o.getPageCount=l,o.tableData=[],o.numberOfPages=0,o.sort={}}]),e.module("serverTable").directive("sTable",["sTableConfig","$injector",function(e,t){return{restrict:"A",controller:"STableController",controllerAs:"vm",link:function(r,n,a,l){function o(){i(),l.getPageCount().then(function(){l.getListFromServer(!1)})}function i(){if(r.hasCache){var e=t.get("$localStorage");l.currentPage=e.currentPage||0}}r.countUrl=a.countUrl||e.countUrl,r.listUrl=a.listUrl||e.listUrl,r.hasCache="undefined"!=typeof a.sCache,o()}}}]),e.module("serverTable").directive("sPagination",["sTableConfig",function(e){return{restrict:"A",require:"^?sTable",templateUrl:function(){return e.paginatorTemplateUrl},link:function(t,r,n,a){function l(){o()}function o(){a.actualItemsByPage||(a.actualItemsByPage=n.itemsByPage||e.itemsByPage[1].value)}function i(){a.currentPage+=1}function s(){a.currentPage-=1}t.nextPage=i,t.previousPage=s,l(),t.$watch("vm.currentPage",function(){a.getListFromServer(!1)})}}}]),e.module("serverTable").directive("sItemsByPage",["$injector","sTableConfig",function(e,t){return{restrict:"EA",require:"^?sTable",templateUrl:function(){return t.itemsByPageTemplateUrl},link:function(r,n,a,l){function o(){i()}function i(){var n=t.itemsByPage[1].value;if(r.hasCache){var o=e.get("$localStorage");l.actualItemsByPage=o.actualItemsByPage||n}else l.actualItemsByPage=a.itemsByPage||n}o(),r.$watch("vm.actualItemsByPage",function(){l.getPageCount().then(function(){l.getListFromServer(!0)})})}}}]),e.module("serverTable").directive("sYearFilter",["$injector","sTableConfig",function(e,t){return{restrict:"EA",require:"^?sTable",templateUrl:function(){return t.yearFilterTemplateUrl},link:function(t,r,n,a){function l(){for(var e=[],t=c;t>=s;t--)e.push({id:t,value:t});return e}function o(){a.years=l(),i()}function i(){if(t.hasCache){var r=e.get("$localStorage");a.year=r.year||(new Date).getFullYear()}else a.year=a.years[0].id}var s=n.start||(new Date).getFullYear(),c=n.end||(new Date).getFullYear();o(),t.$watch("vm.year",function(){a.getPageCount().then(function(){a.getListFromServer(!0)})})}}}]),e.module("serverTable").directive("sMonthFilter",["$injector","sTableConfig",function(e,t){return{restrict:"EA",require:"^?sTable",templateUrl:function(){return t.monthFilterTemplateUrl},link:function(r,n,a,l){function o(){i()}function i(){if(r.hasCache){var n=e.get("$localStorage");l.month=n.month||t.months[0].id}else l.month=l.months[0].id}o(),r.$watch("vm.month",function(){l.getPageCount().then(function(){l.getListFromServer(!0)})})}}}]),e.module("serverTable").directive("sCache",["$localStorage",function(e){return{restrict:"A",require:"^?sTable",link:function(t){t.$watchGroup(["vm.currentPage","vm.actualItemsByPage","vm.month","vm.year"],function(t){e.currentPage=t[0],e.actualItemsByPage=t[1],e.month=t[2],e.year=t[3]})}}}]),e.module("serverTable").directive("sSearch",["sTableConfig",function(e){return{restrict:"EA",require:"^?sTable",templateUrl:function(){return e.searchFieldTemplateUrl},link:function(e,t,r,n){e.$watch("vm.searchText",function(){n.getPageCount().then(function(){n.getListFromServer(!0)})})}}}]),e.module("serverTable").directive("sSort",["sTableConfig",function(t){return{restrict:"A",require:"^?sTable",link:function(r,n,a,l){function o(){for(var t in l.sort)l.sort.hasOwnProperty(t)&&t!==m&&(e.element(document.querySelector("#"+t+"_sort"))[0].className="")}function i(){var e=n[0].children[1];switch(o(),l.sort={},e.className){case s:e.className=c,l.sort[m]="descending";break;case c:e.className=u,l.sort[m]="none";break;case u:e.className=s,l.sort[m]="ascending"}l.getListFromServer(!0)}var s=t.sortAscIcon,c=t.sortDescIcon,u=t.sortNoneIcon,m=a.sSort;n.bind("click",function(){i()}),n.append('<i id="'+m+'_sort"></i>'),n.css("cursor","pointer")}}}])});