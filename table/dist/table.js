!function(e,t){"undefined"!=typeof module&&module.exports?"undefined"==typeof angular?module.exports=t(require("angular")):module.exports=t(angular):"function"==typeof define&&define.amd?define(["../../example/client/bower_components/angular/angular"],t):t(e.angular)}(this,function(e){"use strict";e.module("serverTable",[]).run(["$templateCache",function(e){e.put("template/servertable/pagination.html",'<div id="server-table-paginator" class="server-table-paginator" ng-if="vm.numberOfPages > 1"><button class="btn btn-default"  type="button" ng-disabled="vm.currentPage === 0" ng-click="previousPage()"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></button><b>{{vm.currentPage+1}}/{{vm.numberOfPages}}</b><button class="btn btn-default" type="button" ng-disabled="vm.currentPage === vm.numberOfPages-1" ng-click="nextPage()"><span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></button></div>'),e.put("template/servertable/itemsByPage.html",'<div class="form-group"><label for="itemsByPage">{{"ITEMS_BY_PAGE" | translate}}:</label><select class="form-control" id="itemsByPage" ng-model="actualItemsByPage" ng-options="rows.value as rows.value for rows in vm.itemsByPage"></select></div>'),e.put("template/servertable/yearFilter.html",'<div class="form-group"><label for="year">{{"YEAR" | translate}}:</label><select class="form-control" id="year" ng-model="vm.year" ng-options="year.id as year.value for year in vm.years"></select></div>'),e.put("template/servertable/monthFilter.html",'<div class="form-group"><label for="month">{{"MONTH" | translate}}:</label><select class="form-control" id="month" ng-model="vm.month" ng-options="month.id as month.value | translate for month in vm.months"></select></div>'),e.put("template/servertable/search.html",'<div class="form-group"><label for="search">{{"SEARCH" | translate}}:</label><input class="form-control" id="search" ng-model="vm.searchText"/></div>')}]),e.module("serverTable").constant("sTableConfig",{itemsByPage:[{value:2},{value:5},{value:10},{value:20},{value:30},{value:40}],months:[{id:1,value:"JANUARY"},{id:2,value:"FEBRUARY"},{id:3,value:"MARCH"},{id:4,value:"APRIL"},{id:5,value:"MAY"},{id:6,value:"JUNE"},{id:7,value:"JULY"},{id:8,value:"AUGUST"},{id:9,value:"SEPTEMBER"},{id:10,value:"OCTOBER"},{id:11,value:"NOVEMBER"},{id:12,value:"DECEMBER"}],countUrl:"/count",listUrl:"/list"}),e.module("serverTable").controller("STableController",["$scope","$http","sTableConfig",function(e,t,a){function r(){return t.get(e.listUrl,{params:{itemsByPage:e.actualItemsByPage,currentPage:l.currentPage,month:l.month,year:l.year,searchText:l.searchText,sort:l.sort}}).then(function(e){l.tableData=e.data})}function n(a){return a&&(l.currentPage=0),t.get(e.countUrl,{params:{month:l.month,year:l.year,searchText:l.searchText}}).then(function(t){l.numberOfPages=Math.ceil(t.data.numberOfRows/(e.actualItemsByPage||t.data.numberOfRows))})}var l=this;l.itemsByPage=a.itemsByPage,l.months=a.months,l.getListFromServer=r,l.getPageCount=n,l.tableData=[],l.currentPage=0,l.numberOfPages=0,l.sort={}}]),e.module("serverTable").directive("sTable",["sTableConfig",function(e){return{restrict:"A",controller:"STableController",controllerAs:"vm",link:function(t,a,r,n){function l(){n.getPageCount(!1).then(function(){n.getListFromServer()})}t.countUrl=r.countUrl||e.countUrl,t.listUrl=r.listUrl||e.listUrl,t.hasCache="undefined"!=typeof r.sCache,l()}}}]),e.module("serverTable").directive("sPagination",["sTableConfig",function(e){return{restrict:"A",require:"^?sTable",templateUrl:function(){return"template/servertable/pagination.html"},link:function(t,a,r,n){function l(){n.currentPage+=1}function i(){n.currentPage-=1}t.actualItemsByPage=r.itemsByPage||e.itemsByPage[1].value,t.nextPage=l,t.previousPage=i,t.$watch("vm.currentPage",function(e,t){n.getListFromServer()})}}}]),e.module("serverTable").directive("sItemsByPage",["$injector","sTableConfig",function(e,t){return{restrict:"EA",require:"^?sTable",templateUrl:function(){return"template/servertable/itemsByPage.html"},link:function(a,r,n,l){if(a.hasCache){var i=e.get("$localStorage");a.actualItemsByPage=i.actualItemsByPage||t.itemsByPage[0].value}else a.actualItemsByPage=n.itemsByPage||t.itemsByPage[0].value;a.$watch("actualItemsByPage",function(e,t){l.getPageCount(!0).then(function(){l.getListFromServer()})})}}}]),e.module("serverTable").directive("sYearFilter",["$injector",function(e){return{restrict:"EA",require:"^?sTable",templateUrl:function(){return"template/servertable/yearFilter.html"},link:function(t,a,r,n){function l(){for(var e=[],t=o;t>=i;t--)e.push({id:t,value:t});return e}var i=r.start||(new Date).getFullYear(),o=r.end||(new Date).getFullYear();if(n.years=l(),t.hasCache){var s=e.get("$localStorage");n.year=s.year||(new Date).getFullYear()}else n.year=n.years[0].id;t.$watch("vm.year",function(e,t){n.getPageCount(!0).then(function(){n.getListFromServer()})})}}}]),e.module("serverTable").directive("sMonthFilter",["$injector","sTableConfig",function(e,t){return{restrict:"EA",require:"^?sTable",templateUrl:function(){return"template/servertable/monthFilter.html"},link:function(a,r,n,l){if(a.hasCache){var i=e.get("$localStorage");l.month=i.month||t.months[0].id}else l.month=l.months[0].id;a.$watch("vm.month",function(e,t){l.getPageCount(!0).then(function(){l.getListFromServer()})})}}}]),e.module("serverTable").directive("sCache",["$localStorage",function(e){return{restrict:"A",require:"^?sTable",link:function(t){t.$watchGroup(["vm.currentPage","actualItemsByPage","vm.month","vm.year"],function(t){e.currentPage=t[0],e.actualItemsByPage=t[1],e.month=t[2],e.year=t[3]})}}}]),e.module("serverTable").directive("sSearch",function(){return{restrict:"EA",require:"^?sTable",templateUrl:function(){return"template/servertable/search.html"},link:function(e,t,a,r){e.$watch("vm.searchText",function(e,t){r.getPageCount(!0).then(function(){r.getListFromServer()})})}}}),e.module("serverTable").directive("sSort",function(){return{restrict:"A",require:"^?sTable",link:function(e,t,a,r){function n(){var e=t[0].children[0];switch(o){case"ascending":e.className="glyphicon glyphicon-triangle-bottom",o="descending";break;case"descending":e.className="",o="none";break;case"none":e.className="glyphicon glyphicon-triangle-top",o="ascending"}r.sort[l]=o,r.getListFromServer()}var l=a.sSort,i=["none","ascending","descending"],o=i[0];t.bind("click",function(){n()}),t.append("<i></i>"),t.css("cursor","pointer")}}})});